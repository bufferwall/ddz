<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="client/Player.js"></script>
</head>
<body>

<div>

    <div><label>用户名</label><input name="name" type="text" id="a"></div>
    <button id="login"> 登陆</button>

</div>

<script>
    function post(url, data, cb) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url);
        xhr.send(data);
        xmlhttp.onreadystatechange = function () {
            if (xhr.readystate == 4 || xhr.readystate == 'complete') {
                cb && cb(xhr.responseText);

            }
        }

    }
    login.onclick = function () {
        var val = document.querySelector('#a').value;
        var data = JSON.stringify(new Player({uname: val}));

        post('http://localhost:8000/addPlayer', data, function (d) {
            localStorage.setItem('u', d.id);
            location.href = '/';
        })


    }

</script>
</body>
</html>